<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>ç¬¬08ç« â€”åŸºç¡€ç¯‡-æä¾›è€…context | æ˜é‡‘å°å†Œ</title><link rel="stylesheet" type="text/css" href="/book/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/latest/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/latest/grids-responsive-min.min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/latest/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/book/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/book/favicon.ico"><link rel="apple-touch-icon" href="/book/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/book/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/book/atom.xml"><script type="text/javascript" src="//lib.baomitu.com/clipboard.js/latest/clipboard.min.js"></script><script type="text/javascript" src="//lib.baomitu.com/toastr.js/latest/toastr.min.js"></script><link rel="stylesheet" href="//lib.baomitu.com/toastr.js/latest/toastr.min.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">ç¬¬08ç« â€”åŸºç¡€ç¯‡-æä¾›è€…context</h1><a id="logo" href="/book/.">æ˜é‡‘å°å†Œ</a><p class="description">å­¦æµ·æ— æ¶¯ï¼Œå…±åŒè¿›æ­¥ï¼</p></div><div id="nav-menu"><a class="current" href="/book/."><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/book/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/book/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/book/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a><a href="/book/guestbook/"><i class="fa fa-comments"> ç•™è¨€</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">ç¬¬08ç« â€”åŸºç¡€ç¯‡-æä¾›è€…context</h1><div class="post-meta">2023-09-26<span> | </span><span class="category"><a href="/book/categories/%E9%BB%98%E8%AE%A4/">é»˜è®¤</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 4.1k</span><span class="post-meta-item-text"> å­—</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i><span class="post-count"> 18</span><span class="post-meta-item-text"> åˆ†é’Ÿ</span></span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E5%89%8D%E8%A8%80"><span class="toc-text">ä¸€ å‰è¨€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%80%81%E7%89%88%E6%9C%ACcontext"><span class="toc-text">è€ç‰ˆæœ¬context</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E6%96%B0%E7%89%88%E6%9C%AC-context-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">äºŒ æ–°ç‰ˆæœ¬ context åŸºæœ¬ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-createContext"><span class="toc-text">1 createContext</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%96%B0%E7%89%88%E6%9C%AC%E6%8F%90%E4%BE%9B%E8%80%85"><span class="toc-text">2 æ–°ç‰ˆæœ¬æä¾›è€…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%96%B0%E7%89%88%E6%9C%AC%E6%B6%88%E8%B4%B9%E8%80%85"><span class="toc-text">3 æ–°ç‰ˆæœ¬æ¶ˆè´¹è€…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E7%B1%BB%E7%BB%84%E4%BB%B6%E4%B9%8BcontextType-%E6%96%B9%E5%BC%8F"><span class="toc-text">â‘  ç±»ç»„ä»¶ä¹‹contextType æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E4%B9%8B-useContext-%E6%96%B9%E5%BC%8F"><span class="toc-text">â‘¡ å‡½æ•°ç»„ä»¶ä¹‹ useContext æ–¹å¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-%E8%AE%A2%E9%98%85%E8%80%85%E4%B9%8B-Consumer-%E6%96%B9%E5%BC%8F"><span class="toc-text">â‘¢ è®¢é˜…è€…ä¹‹ Consumer æ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8A%A8%E6%80%81context"><span class="toc-text">4 åŠ¨æ€context</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%85%B6%E4%BB%96api"><span class="toc-text">5 å…¶ä»–api</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-displayName"><span class="toc-text">â‘  displayName</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-context%E9%AB%98%E9%98%B6%E7%94%A8%E6%B3%95"><span class="toc-text">ä¸‰ contexté«˜é˜¶ç”¨æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B5%8C%E5%A5%97-Provider"><span class="toc-text">åµŒå¥— Provider</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%90%E5%B1%82%E4%BC%A0%E9%80%92Provider"><span class="toc-text">é€å±‚ä¼ é€’Provider</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E8%BF%9B%E9%98%B6%E5%AE%9E%E8%B7%B5-%E5%88%87%E6%8D%A2%E4%B8%BB%E9%A2%98%E6%A8%A1%E5%BC%8F"><span class="toc-text">å›› è¿›é˜¶å®è·µ-åˆ‡æ¢ä¸»é¢˜æ¨¡å¼</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E6%80%BB%E7%BB%93"><span class="toc-text">äº” æ€»ç»“</span></a></li></ol></div></div><div class="post-content"><h2 id="ä¸€-å‰è¨€"><a href="#ä¸€-å‰è¨€" class="headerlink" title="ä¸€ å‰è¨€"></a>ä¸€ å‰è¨€</h2><p>æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬æ¥è°ˆè°ˆ<code> React context</code>ã€‚åœ¨æ­£å¼ä»‹ç»ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥æƒ³ä¸€æƒ³ä¸ºä»€ä¹ˆ React ä¼šæä¾› context çš„ API å‘¢ï¼Ÿ</p>
<p>å¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œé¦–å…ˆå‡è®¾ä¸€ä¸ªåœºæ™¯ï¼šåœ¨ React çš„é¡¹ç›®æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ themeï¼ˆ theme å¯èƒ½æ˜¯åˆå§‹åŒ–æ•°æ®äº¤äº’è·å¾—çš„ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯åˆ‡æ¢ä¸»é¢˜å˜åŒ–çš„ï¼‰ï¼Œæœ‰ä¸€äº›è§†å›¾ UI ç»„ä»¶ï¼ˆæ¯”å¦‚è¡¨å• input æ¡†ã€button æŒ‰é’®ï¼‰ï¼Œéœ€è¦ theme é‡Œé¢çš„å˜é‡æ¥åšå¯¹åº”çš„è§†å›¾æ¸²æŸ“ï¼Œç°åœ¨çš„é—®é¢˜æ˜¯æ€ä¹ˆèƒ½å¤ŸæŠŠ theme ä¼ é€’ä¸‹å»ï¼Œåˆç†åˆ†é…åˆ°<strong>ç”¨åˆ°è¿™ä¸ª theme</strong> çš„åœ°æ–¹ã€‚</p>
<p>é‚£ä¹ˆï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯ <strong>props çš„å¯è¡Œæ€§</strong>ï¼Œå¦‚æœè®© props æ¥è§£å†³ä¸Šè¿°é—®é¢˜å¯ä»¥æ˜¯å¯ä»¥ï¼Œä¸è¿‡ä¼šæœ‰ä¸¤ä¸ªé—®é¢˜ã€‚å‡è®¾é¡¹ç›®çš„ç»„ä»¶æ ‘æƒ…å†µå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå› ä¸ºåœ¨è®¾è®¡æ•´ä¸ªé¡¹ç›®çš„æ—¶å€™ï¼Œä¸ç¡®å®šå°†æ¥å“ªä¸€ä¸ªæ¨¡å—éœ€è¦ theme ï¼Œæ‰€ä»¥å¿…é¡»å°† theme åœ¨æ ¹ç»„ä»¶ A æ³¨å…¥ï¼Œä½†æ˜¯éœ€è¦ç»™ç»„ä»¶ N ä¼ é€’ props ï¼Œéœ€è¦åœ¨ä¸Šé¢æ¯ä¸€å±‚éƒ½å»æ‰‹åŠ¨ç»‘å®š props ï¼Œå¦‚æœå°†æ¥å…¶ä»–å­åˆ†æ”¯ä¸Šæœ‰æ›´æ·±å±‚çš„ç»„ä»¶éœ€è¦ theme ï¼Œè¿˜éœ€è¦æŠŠä¸Šä¸€çº§çš„ç»„ä»¶å…¨éƒ¨ç»‘å®šä¼ é€’ props ï¼Œè¿™æ ·ç»´æŠ¤æˆæœ¬æ˜¯å·¨å¤§çš„ã€‚</p>
<p>å‡è®¾éœ€è¦åŠ¨æ€æ”¹å˜ theme ï¼Œé‚£ä¹ˆéœ€è¦ä»æ ¹ç»„ä»¶æ›´æ–°ï¼Œåªè¦éœ€è¦ theme çš„ç»„ä»¶ï¼Œç”±å®ƒå¼€å§‹åˆ°æ ¹ç»„ä»¶çš„ä¸€æ¡ç»„ä»¶é“¾ç»“æ„éƒ½éœ€è¦æ›´æ–°ï¼Œä¼šé€ æˆç‰µä¸€å‘åŠ¨å…¨èº«çš„å½±å“ã€‚props æ–¹å¼çœ‹æ¥ä¸åˆ‡å®é™…ã€‚</p>
<p><img src="https://raw.githubusercontent.com/Flashcard8009/image/main/img/202309261651232.jpeg" alt="context1.jpg"></p>
<p>ä¸ºäº†è§£å†³ä¸Šè¿° props ä¼ é€’çš„ä¸¤ä¸ªé—®é¢˜ï¼ŒReactæä¾›äº†contextâ€˜ä¸Šä¸‹æ–‡â€™æ¨¡å¼ï¼Œå…·ä½“æ¨¡å¼æ˜¯è¿™æ ·çš„ï¼ŒReactç»„ä»¶æ ‘AèŠ‚ç‚¹ï¼Œç”¨Provideræä¾›è€…æ³¨å…¥themeï¼Œç„¶ååœ¨éœ€è¦themeçš„åœ°æ–¹ï¼Œç”¨ Consumer æ¶ˆè´¹è€…å½¢å¼å–å‡ºthemeï¼Œä¾›ç»™ç»„ä»¶æ¸²æŸ“ä½¿ç”¨å³å¯ï¼Œè¿™æ ·å‡å°‘å¾ˆå¤šæ— ç”¨åŠŸã€‚ç”¨å®˜ç½‘ä¸Šçš„ä¸€å¥è¯å½¢å®¹å°±æ˜¯Context æä¾›äº†ä¸€ä¸ªæ— éœ€ä¸ºæ¯å±‚ç»„ä»¶æ‰‹åŠ¨æ·»åŠ  propsï¼Œå°±èƒ½åœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•ã€‚</p>
<p>ä½†æ˜¯å¿…é¡»æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œ<strong>æä¾›è€…æ°¸è¿œè¦åœ¨æ¶ˆè´¹è€…ä¸Šå±‚</strong>ï¼Œæ­£æ‰€è°“æ°´å¾€ä½å¤„æµï¼Œæä¾›è€…ä¸€å®šè¦æ˜¯æ¶ˆè´¹è€…çš„æŸä¸€å±‚çˆ¶çº§ã€‚</p>
<p>å¸Œæœ›é€šè¿‡æœ¬ç« èŠ‚å°†å­¦ä¼š React Context çš„åŸºç¡€ç”¨æ³•ï¼Œé«˜é˜¶ç”¨æ³•ï¼Œä»¥åŠ Context åˆ‡æ¢ä¸»é¢˜å®è·µã€‚è®©è¯»è¿‡çš„åŒå­¦ï¼Œèƒ½å¤Ÿæ˜ç™½ context ä½¿ç”¨åœºæ™¯ï¼Œä»¥åŠæ­£ç¡®ä½¿ç”¨ context ã€‚</p>
<h3 id="è€ç‰ˆæœ¬context"><a href="#è€ç‰ˆæœ¬context" class="headerlink" title="è€ç‰ˆæœ¬context"></a>è€ç‰ˆæœ¬context</h3><p>åœ¨<code>v16.3.0</code>ä¹‹å‰ï¼ŒReact ç”¨ PropTypes æ¥å£°æ˜ context ç±»å‹ï¼Œæä¾›è€…éœ€è¦ getChildContext æ¥è¿”å›éœ€è¦æä¾›çš„ context ï¼Œå¹¶ä¸”ç”¨é™æ€å±æ€§  childContextTypes å£°æ˜éœ€è¦æä¾›çš„ context æ•°æ®ç±»å‹ã€‚å…·ä½“å¦‚ä¸‹</p>
<p><strong>è€ç‰ˆæœ¬æä¾›è€…</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æä¾›è€…</span></span><br><span class="line"><span class="keyword">import</span> propsTypes <span class="keyword">from</span> <span class="string">&#x27;proptypes&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ProviderDemo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123; </span><br><span class="line">    <span class="title function_">getChildContext</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> theme = &#123; <span class="comment">/* æä¾›è€…è¦æä¾›çš„ä¸»é¢˜é¢œè‰²ï¼Œä¾›æ¶ˆè´¹è€…æ¶ˆè´¹ */</span></span><br><span class="line">            <span class="attr">color</span>:<span class="string">&#x27;#ccc&#x27;</span>,</span><br><span class="line">            <span class="attr">background</span>:<span class="string">&#x27;pink&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> &#123; theme &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            hello,let us learn React!</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Son</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ProviderDemo</span>.<span class="property">childContextTypes</span> = &#123;</span><br><span class="line">    <span class="attr">theme</span>:propsTypes.<span class="property">object</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€ç‰ˆæœ¬ api åœ¨ v16 ç‰ˆæœ¬è¿˜èƒ½æ­£å¸¸ä½¿ç”¨ï¼Œå¯¹äºæä¾›è€…ï¼Œéœ€è¦é€šè¿‡ getChildContext æ–¹æ³•ï¼Œå°†ä¼ é€’çš„ theme ä¿¡æ¯è¿”å›å‡ºå»ï¼Œå¹¶é€šè¿‡ childContextTypes å£°æ˜è¦ä¼ é€’çš„ theme æ˜¯ä¸€ä¸ªå¯¹è±¡ç»“æ„ã€‚å£°æ˜ç±»å‹éœ€è¦<code>propsTypes</code>åº“æ¥åŠ©åŠ›ã€‚</p>
<p><strong>è€ç‰ˆæœ¬æ¶ˆè´¹è€…</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¶ˆè´¹è€…</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConsumerDemo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">   <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">theme</span>) <span class="comment">// &#123;  color:&#x27;#ccc&#x27;,  bgcolor:&#x27;pink&#x27; &#125;</span></span><br><span class="line">       <span class="keyword">const</span> &#123; color , background &#125; = <span class="variable language_">this</span>.<span class="property">context</span>.<span class="property">theme</span></span><br><span class="line">       <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span>,<span class="attr">background</span> &#125; &#125; &gt;</span>æ¶ˆè´¹è€…<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ConsumerDemo</span>.<span class="property">contextTypes</span> = &#123;</span><br><span class="line">    <span class="attr">theme</span>:propsTypes.<span class="property">object</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Son</span> = (<span class="params"></span>)=&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">ConsumerDemo</span>/&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="https://raw.githubusercontent.com/Flashcard8009/image/main/img/202309261651891.jpeg" alt="context2.jpg"></p>
<p>ä½œä¸ºæ¶ˆè´¹è€…ï¼Œéœ€è¦åœ¨ç»„ä»¶çš„é™æ€å±æ€§æŒ‡æ˜æˆ‘åˆ°åº•éœ€è¦å“ªä¸ªæä¾›è€…æä¾›çš„çŠ¶æ€ï¼Œåœ¨ demo é¡¹ç›®ä¸­ï¼ŒConsumerDemo çš„ contextTypes æ˜ç¡®çš„æŒ‡æ˜äº†éœ€è¦ ProviderDemo æä¾›çš„ themeä¿¡æ¯ï¼Œç„¶åå°±å¯ä»¥é€šè¿‡ this.context.theme è®¿é—®åˆ° theme ï¼Œç”¨åšæ¸²æŸ“æ¶ˆè´¹ã€‚</p>
<p>è¿™ç§æ¨¡å¼å’Œ vue ä¸­çš„ provide å’Œ inject æ•°æ®ä¼ è¾“æ¨¡å¼å¾ˆåƒï¼Œåœ¨æä¾›è€…ä¸­å£°æ˜åˆ°åº•ä¼ é€’ä»€ä¹ˆï¼Œç„¶åæ¶ˆè´¹è€…æŒ‡å‡ºéœ€è¦å“ªä¸ªæä¾›è€…æä¾›çš„ context ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œå°±å¥½æ¯”å»ä¸€ä¸ªé«˜æ¡£é¤å…ï¼Œæ¯ä¸€ä¸ªå¨å¸ˆéƒ½å¯ä»¥ç†è§£æˆä¸€ä¸ªæä¾›è€…ï¼Œè€Œä¸”æ¯ä¸ªå¨å¸ˆå„æœ‰æ‰€é•¿ï¼Œæœ‰çš„æ“…é•¿ä¸­é¤ï¼Œæœ‰çš„æ“…é•¿è¥¿é¤ï¼Œæ¯ä¸ªå¨å¸ˆéƒ½æŠŠæ“…é•¿çš„ç”¨ <code>childContextTypes</code> è´´å‡ºæ¥ï¼Œä½ ä½œä¸ºæ¶ˆè´¹è€…ï¼Œç”¨ <code>contextTypes</code> æ˜ç¡®å‡ºæƒ³è¦åƒå“ªä¸ªå¨å¸ˆåšçš„é¤é¥®ï¼Œå€Ÿæ­¤åšåˆ°ç‰©å°½æ‰€éœ€ã€‚</p>
<h2 id="äºŒ-æ–°ç‰ˆæœ¬-context-åŸºæœ¬ä½¿ç”¨"><a href="#äºŒ-æ–°ç‰ˆæœ¬-context-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="äºŒ æ–°ç‰ˆæœ¬ context åŸºæœ¬ä½¿ç”¨"></a>äºŒ æ–°ç‰ˆæœ¬ context åŸºæœ¬ä½¿ç”¨</h2><p>ä¸Šè¿°çš„ API ç”¨èµ·æ¥æµç¨‹å¯èƒ½ä¼šå¾ˆç¹çï¼Œè€Œä¸”è¿˜ä¾èµ–äº propsTypes ç­‰ç¬¬ä¸‰æ–¹åº“ã€‚æ‰€ä»¥ <code>v16.3.0</code> ä¹‹åï¼Œcontext api æ­£å¼å‘å¸ƒäº†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ç”¨ createContext åˆ›å»ºå‡ºä¸€ä¸ª context ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œcontext å¯¹è±¡æä¾›ä¸¤ä¸ªç»„ä»¶ï¼Œ<code>Provider</code>å’Œ <code>Consumer</code>ä½œä¸ºæ–°çš„æä¾›è€…å’Œæ¶ˆè´¹è€…ï¼Œè¿™ç§ context æ¨¡å¼ï¼Œæ›´ä¾¿æ·çš„ä¼ é€’ context ï¼Œè¿˜å¢åŠ äº†ä¸€äº›æ–°çš„ç‰¹æ€§ï¼Œä½†æ˜¯ä¹Ÿå¼•å‡ºäº†ä¸€äº›æ–°çš„é—®é¢˜ï¼Œä»€ä¹ˆé—®é¢˜åé¢ä¼šè®²åˆ°ã€‚æ¥ä¸‹æ¥éœ€è¦é‡ç‚¹ç ”ç©¶ä¸€ä¸‹æ–°ç‰ˆæœ¬çš„ context ã€‚</p>
<h3 id="1-createContext"><a href="#1-createContext" class="headerlink" title="1 createContext"></a>1 createContext</h3><p><code>React.createContext</code> çš„åŸºæœ¬ç”¨æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="literal">null</span>) <span class="comment">//</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeProvider</span> = <span class="title class_">ThemeContext</span>.<span class="property">Provider</span>  <span class="comment">//æä¾›è€…</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeConsumer</span> = <span class="title class_">ThemeContext</span>.<span class="property">Consumer</span> <span class="comment">// è®¢é˜…æ¶ˆè´¹è€…</span></span><br></pre></td></tr></table></figure>

<p>createContext æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä½œä¸ºåˆå§‹åŒ– context çš„å†…å®¹ï¼Œè¿”å›ä¸€ä¸ªcontext å¯¹è±¡ï¼ŒContext å¯¹è±¡ä¸Šçš„ Provider ä½œä¸ºæä¾›è€…ï¼ŒContext å¯¹è±¡ä¸Šçš„ Consumer ä½œä¸ºæ¶ˆè´¹è€…ã€‚</p>
<h3 id="2-æ–°ç‰ˆæœ¬æä¾›è€…"><a href="#2-æ–°ç‰ˆæœ¬æä¾›è€…" class="headerlink" title="2 æ–°ç‰ˆæœ¬æä¾›è€…"></a>2 æ–°ç‰ˆæœ¬æä¾›è€…</h3><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸‹Providerçš„ç”¨æ³•ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeProvider</span> = <span class="title class_">ThemeContext</span>.<span class="property">Provider</span>  <span class="comment">//æä¾›è€…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">ProviderDemo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [ contextValue , setContextValue ] = <span class="title class_">React</span>.<span class="title function_">useState</span>(&#123;  <span class="attr">color</span>:<span class="string">&#x27;#ccc&#x27;</span>, <span class="attr">background</span>:<span class="string">&#x27;pink&#x27;</span> &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ThemeProvider</span> <span class="attr">value</span>=<span class="string">&#123;</span> <span class="attr">contextValue</span> &#125; &gt;</span> </span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Son</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>provider ä½œç”¨æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>value å±æ€§ä¼ é€’ contextï¼Œä¾›ç»™ Consumer ä½¿ç”¨ã€‚</li>
<li>value å±æ€§æ”¹å˜ï¼ŒThemeProvider ä¼šè®©æ¶ˆè´¹ Provider value çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</li>
</ul>
<h3 id="3-æ–°ç‰ˆæœ¬æ¶ˆè´¹è€…"><a href="#3-æ–°ç‰ˆæœ¬æ¶ˆè´¹è€…" class="headerlink" title="3 æ–°ç‰ˆæœ¬æ¶ˆè´¹è€…"></a>3 æ–°ç‰ˆæœ¬æ¶ˆè´¹è€…</h3><p>å¯¹äºæ–°ç‰ˆæœ¬æƒ³è¦è·å– context çš„æ¶ˆè´¹è€…ï¼ŒReact æä¾›äº†3ç§å½¢å¼ï¼Œæ¥ä¸‹æ¥ä¸€ä¸€ä»‹ç»è¿™ä¸‰ç§æ–¹å¼ã€‚</p>
<h4 id="â‘ -ç±»ç»„ä»¶ä¹‹contextType-æ–¹å¼"><a href="#â‘ -ç±»ç»„ä»¶ä¹‹contextType-æ–¹å¼" class="headerlink" title="â‘  ç±»ç»„ä»¶ä¹‹contextType æ–¹å¼"></a>â‘  ç±»ç»„ä»¶ä¹‹contextType æ–¹å¼</h4><p><code>React v16.6</code> æä¾›äº† contextType é™æ€å±æ€§ï¼Œç”¨æ¥è·å–ä¸Šé¢ Provider æä¾›çš„ value å±æ€§ï¼Œè¿™é‡Œæ³¨æ„çš„æ˜¯ contextType ï¼Œä¸æ˜¯ä¸Šè¿°è€ç‰ˆçš„contextTypes, å¯¹äº React èµ·çš„è¿™ä¸¤ä¸ªåå­—ï¼ŒçœŸæ˜¯å¤ªç›¸åƒäº†ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="comment">// ç±»ç»„ä»¶ - contextType æ–¹å¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConsumerDemo</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">   <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">       <span class="keyword">const</span> &#123; color,background &#125; = <span class="variable language_">this</span>.<span class="property">context</span></span><br><span class="line">       <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span>,<span class="attr">background</span> &#125; &#125; &gt;</span>æ¶ˆè´¹è€…<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> </span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">ConsumerDemo</span>.<span class="property">contextType</span> = <span class="title class_">ThemeContext</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Son</span> = (<span class="params"></span>)=&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">ConsumerDemo</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>ç±»ç»„ä»¶çš„é™æ€å±æ€§ä¸Šçš„ contextType å±æ€§ï¼ŒæŒ‡å‘éœ€è¦è·å–çš„ contextï¼ˆ demo ä¸­çš„ ThemeContext ï¼‰ï¼Œå°±å¯ä»¥æ–¹ä¾¿è·å–åˆ°æœ€è¿‘ä¸€å±‚ Provider æä¾›çš„ contextValue å€¼ã€‚</li>
<li>è®°ä½è¿™ç§æ–¹å¼åªé€‚ç”¨äºç±»ç»„ä»¶ã€‚</li>
</ul>
<h4 id="â‘¡-å‡½æ•°ç»„ä»¶ä¹‹-useContext-æ–¹å¼"><a href="#â‘¡-å‡½æ•°ç»„ä»¶ä¹‹-useContext-æ–¹å¼" class="headerlink" title="â‘¡ å‡½æ•°ç»„ä»¶ä¹‹ useContext æ–¹å¼"></a>â‘¡ å‡½æ•°ç»„ä»¶ä¹‹ useContext æ–¹å¼</h4><p>æ—¢ç„¶ç±»ç»„ä»¶éƒ½å¯ä»¥å¿«æ·è·å– context äº†ï¼Œé‚£ä¹ˆå‡½æ•°ç»„ä»¶ä¹Ÿåº”è¯¥ç ”ç©¶ä¸€ä¸‹å¦‚ä½•å¿«é€Ÿè·å– context å§ï¼Œäºæ˜¯ä¹ v16.8 React hooks æä¾›äº† <code>useContext</code>ï¼Œä¸‹é¢çœ‹ä¸€ä¸‹ useContext ä½¿ç”¨ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="comment">// å‡½æ•°ç»„ä»¶ - useContextæ–¹å¼</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ConsumerDemo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span>  contextValue = <span class="title class_">React</span>.<span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>) <span class="comment">/*  */</span></span><br><span class="line">    <span class="keyword">const</span> &#123; color,background &#125; = contextValue</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span>,<span class="attr">background</span> &#125; &#125; &gt;</span>æ¶ˆè´¹è€…<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Son</span> = (<span class="params"></span>)=&gt; <span class="language-xml"><span class="tag">&lt;<span class="name">ConsumerDemo</span> /&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>useContext æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå°±æ˜¯æƒ³è¦è·å–çš„ context ï¼Œè¿”å›ä¸€ä¸ª value å€¼ï¼Œå°±æ˜¯æœ€è¿‘çš„ provider æä¾› contextValue å€¼ã€‚</p>
<h4 id="â‘¢-è®¢é˜…è€…ä¹‹-Consumer-æ–¹å¼"><a href="#â‘¢-è®¢é˜…è€…ä¹‹-Consumer-æ–¹å¼" class="headerlink" title="â‘¢ è®¢é˜…è€…ä¹‹ Consumer æ–¹å¼"></a>â‘¢ è®¢é˜…è€…ä¹‹ Consumer æ–¹å¼</h4><p>React è¿˜æä¾›äº†ä¸€ç§ Consumer è®¢é˜…æ¶ˆè´¹è€…æ–¹å¼ï¼Œæˆ‘ä»¬ç ”ç©¶ä¸€ä¸‹è¿™ç§æ–¹å¼å¦‚ä½•ä¼ é€’ context ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeConsumer</span> = <span class="title class_">ThemeContext</span>.<span class="property">Consumer</span> <span class="comment">// è®¢é˜…æ¶ˆè´¹è€…</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ConsumerDemo</span>(<span class="params">props</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; color,background &#125; = props</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span>,<span class="attr">background</span> &#125; &#125; &gt;</span>æ¶ˆè´¹è€…<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Son</span> = (<span class="params"></span>) =&gt; (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeConsumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       &#123; /* å°† context å†…å®¹è½¬åŒ–æˆ props  */ &#125;</span></span><br><span class="line"><span class="language-xml">       &#123; (contextValue)=&gt; <span class="tag">&lt;<span class="name">ConsumerDemo</span>  &#123;<span class="attr">...contextValue</span>&#125;  /&gt;</span> &#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeConsumer</span>&gt;</span></span></span><br><span class="line">) </span><br></pre></td></tr></table></figure>

<ul>
<li>Consumer è®¢é˜…è€…é‡‡å– render props æ–¹å¼ï¼Œæ¥å—æœ€è¿‘ä¸€å±‚ provider ä¸­value å±æ€§ï¼Œä½œä¸º render props å‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥å°†å‚æ•°å–å‡ºæ¥ï¼Œä½œä¸º props æ··å…¥ <code>ConsumerDemo</code> ç»„ä»¶ï¼Œè¯´ç™½äº†å°±æ˜¯ context å˜æˆäº† propsã€‚</li>
</ul>
<h3 id="4-åŠ¨æ€context"><a href="#4-åŠ¨æ€context" class="headerlink" title="4 åŠ¨æ€context"></a>4 åŠ¨æ€context</h3><p>ä¸Šé¢è®²åˆ°çš„ context éƒ½æ˜¯é™æ€çš„ï¼Œä¸å˜çš„ï¼Œä½†æ˜¯å®é™…çš„åœºæ™¯ä¸‹ï¼Œcontext å¯èƒ½æ˜¯åŠ¨æ€çš„ï¼Œå¯å˜çš„ï¼Œæ¯”å¦‚è¯´å›åˆ°äº†æœ¬ç« èŠ‚æœ€å¼€å§‹çš„è¯é¢˜åˆ‡æ¢ä¸»é¢˜ï¼Œå› ä¸ºåˆ‡æ¢ä¸»é¢˜å°±æ˜¯åœ¨åŠ¨æ€æ”¹å˜ context çš„å†…å®¹ã€‚æ‰€ä»¥æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹åŠ¨æ€æ”¹å˜ context ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">ConsumerDemo</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="keyword">const</span> &#123; color,background &#125; = <span class="title class_">React</span>.<span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span>,<span class="attr">background</span> &#125; &#125; &gt;</span>æ¶ˆè´¹è€…<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Son</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">()=&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ConsumerDemo</span> /&gt;</span></span>) <span class="comment">// å­ç»„ä»¶</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeProvider</span> = <span class="title class_">ThemeContext</span>.<span class="property">Provider</span> <span class="comment">//æä¾›è€…</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">ProviderDemo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [ contextValue , setContextValue ] = <span class="title class_">React</span>.<span class="title function_">useState</span>(&#123;  <span class="attr">color</span>:<span class="string">&#x27;#ccc&#x27;</span>, <span class="attr">background</span>:<span class="string">&#x27;pink&#x27;</span> &#125;)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ThemeProvider</span> <span class="attr">value</span>=<span class="string">&#123;</span> <span class="attr">contextValue</span> &#125; &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Son</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> ()=&gt;</span> setContextValue(&#123; color:&#x27;#fff&#x27; , background:&#x27;blue&#x27; &#125;)  &#125; &gt;åˆ‡æ¢ä¸»é¢˜<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœ</p>
<p><img src="https://raw.githubusercontent.com/Flashcard8009/image/main/img/202309261651423.gif" alt="context5.gif"></p>
<p>Provider æ¨¡å¼ä¸‹ context æœ‰ä¸€ä¸ªæ˜¾è‘—çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯ <strong>Provder çš„ value æ”¹å˜ï¼Œä¼šä½¿æ‰€æœ‰æ¶ˆè´¹ value çš„ç»„ä»¶é‡æ–°æ¸²æŸ“</strong>ï¼Œå¦‚ä¸Šé€šè¿‡ä¸€ä¸ª useState æ¥æ”¹å˜ contextValue çš„å€¼ï¼ŒcontextValue æ”¹å˜ï¼Œä¼šä½¿ ConsumerDemo è‡ªåŠ¨æ›´æ–°ï¼Œæ³¨æ„è¿™ä¸ªæ›´æ–°å¹¶ä¸æ˜¯ç”±çˆ¶ç»„ä»¶ son render é€ æˆçš„ï¼Œå› ä¸ºç»™ son ç”¨ memo å¤„ç†è¿‡ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼ŒSon æ²¡æœ‰è§¦å‘ renderï¼Œè€Œæ˜¯ ConsumerDemo è‡ªå‘çš„renderã€‚</p>
<p><strong>æ€»ç»“ï¼šåœ¨ Provider é‡Œ value çš„æ”¹å˜ï¼Œä¼šä½¿å¼•ç”¨<code>contextType</code>,<code>useContext</code> æ¶ˆè´¹è¯¥ context çš„ç»„ä»¶é‡æ–° render ï¼ŒåŒæ ·ä¼šä½¿ Consumer çš„ children å‡½æ•°é‡æ–°æ‰§è¡Œï¼Œä¸å‰ä¸¤ç§æ–¹å¼ä¸åŒçš„æ˜¯ Consumer æ–¹å¼ï¼Œå½“ context å†…å®¹æ”¹å˜çš„æ—¶å€™ï¼Œä¸ä¼šè®©å¼•ç”¨ Consumer çš„çˆ¶ç»„ä»¶é‡æ–°æ›´æ–°ã€‚</strong></p>
<p><strong>æš´éœ²é—®é¢˜</strong></p>
<p>ä½†æ˜¯ä¸Šè¿°çš„ demo æš´éœ²å‡ºä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åœ¨ä¸Šè¿° son ç»„ä»¶æ˜¯ç”¨ memo å¤„ç†çš„ï¼Œå¦‚æœæ²¡æœ‰ memo å¤„ç†ï¼ŒuseState ä¼šè®© <code>ProviderDemo</code> é‡æ–° render ï¼Œæ­¤æ—¶ son æ²¡æœ‰å¤„ç†ï¼Œå°±ä¼šè·Ÿéšçˆ¶ç»„ä»¶ render ï¼Œé—®é¢˜æ˜¯å¦‚æœ son è¿˜æœ‰å¾ˆå¤šå­ç»„ä»¶ï¼Œé‚£ä¹ˆå…¨éƒ¨ render ä¸€éã€‚é‚£ä¹ˆ<strong>å¦‚ä½•é˜»æ­¢ Provider value æ”¹å˜é€ æˆçš„ children ï¼ˆ demo ä¸­çš„ Son ï¼‰ä¸å¿…è¦çš„æ¸²æŸ“ï¼Ÿ</strong></p>
<p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨çŸ¥ä¹çœ‹è§è¿‡å¤§ä½¬ä»¬è§£ç­”ï¼Œè¯´çš„å¾ˆç„ä¹ï¼Œä¼šè®©ä¸æ˜¯æ·±å…¥æ¥è§¦ React çš„åŒå­¦å¾ˆç–‘æƒ‘ğŸ¤”ï¼Œç©¶å…¶æœ¬è´¨å°±æ˜¯å¦‚ä¸‹ä¸¤ä¸ªæ€è·¯ã€‚</p>
<ul>
<li>â‘  ç¬¬ä¸€ç§å°±æ˜¯åˆ©ç”¨ memoï¼ŒpureComponent å¯¹å­ç»„ä»¶ props è¿›è¡Œæµ…æ¯”è¾ƒå¤„ç†ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Son</span> = <span class="title class_">React</span>.<span class="title function_">memo</span>(<span class="function">()=&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ConsumerDemo</span> /&gt;</span></span>)  </span><br></pre></td></tr></table></figure>

<ul>
<li>â‘¡ ç¬¬äºŒç§å°±æ˜¯ React æœ¬èº«å¯¹ React element å¯¹è±¡çš„ç¼“å­˜ã€‚React æ¯æ¬¡æ‰§è¡Œ render éƒ½ä¼šè°ƒç”¨ createElement å½¢æˆæ–°çš„ React element å¯¹è±¡ï¼Œå¦‚æœæŠŠ React element ç¼“å­˜ä¸‹æ¥ï¼Œä¸‹ä¸€æ¬¡è°ƒå’Œæ›´æ–°æ—¶å€™ï¼Œå°±ä¼šè·³è¿‡è¯¥ React element å¯¹åº” fiber çš„æ›´æ–°ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">ThemeProvider</span> value=&#123; contextValue &#125; &gt;</span><br><span class="line">    &#123; <span class="title class_">React</span>.<span class="title function_">useMemo</span>(<span class="function">()=&gt;</span>  <span class="language-xml"><span class="tag">&lt;<span class="name">Son</span> /&gt;</span></span> ,[]) &#125;</span><br><span class="line">&lt;/<span class="title class_">ThemeProvider</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="5-å…¶ä»–api"><a href="#5-å…¶ä»–api" class="headerlink" title="5 å…¶ä»–api"></a>5 å…¶ä»–api</h3><h4 id="â‘ -displayName"><a href="#â‘ -displayName" class="headerlink" title="â‘  displayName"></a>â‘  displayName</h4><p>context å¯¹è±¡æ¥å—ä¸€ä¸ªåä¸º <code>displayName</code> çš„ propertyï¼Œç±»å‹ä¸ºå­—ç¬¦ä¸²ã€‚React DevTools ä½¿ç”¨è¯¥å­—ç¬¦ä¸²æ¥ç¡®å®š context è¦æ˜¾ç¤ºçš„å†…å®¹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">MyContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="comment">/* åˆå§‹åŒ–å†…å®¹ */</span>);</span><br><span class="line"><span class="title class_">MyContext</span>.<span class="property">displayName</span> = <span class="string">&#x27;MyDisplayName&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&lt;<span class="title class_">MyContext</span>.<span class="property">Provider</span>&gt; <span class="comment">// &quot;MyDisplayName.Provider&quot; åœ¨ DevTools ä¸­</span></span><br><span class="line">&lt;<span class="title class_">MyContext</span>.<span class="property">Consumer</span>&gt; <span class="comment">// &quot;MyDisplayName.Consumer&quot; åœ¨ DevTools ä¸­</span></span><br></pre></td></tr></table></figure>

<p><strong>ï½œâ€”â€”â€“é—®ä¸ç­”â€”â€”â€”ï½œ</strong><br/><br><strong>é—®</strong>ï¼šcontext ä¸ props å’Œ react-redux çš„å¯¹æ¯”ï¼Ÿ</p>
<p><strong>ç­”</strong>ï¼š contextè§£å†³äº†ï¼š</p>
<ul>
<li><p>è§£å†³äº† props éœ€è¦æ¯ä¸€å±‚éƒ½æ‰‹åŠ¨æ·»åŠ  props çš„ç¼ºé™·ã€‚</p>
</li>
<li><p>è§£å†³äº†æ”¹å˜ value ï¼Œç»„ä»¶å…¨éƒ¨é‡æ–°æ¸²æŸ“çš„ç¼ºé™·ã€‚</p>
</li>
</ul>
<p>react-redux å°±æ˜¯é€šè¿‡ Provider æ¨¡å¼æŠŠ redux ä¸­çš„ store æ³¨å…¥åˆ°ç»„ä»¶ä¸­çš„ã€‚</p>
<p><strong>ï½œâ€”â€”â€“endâ€”â€”â€”ï½œ</strong><br/></p>
<h2 id="ä¸‰-contexté«˜é˜¶ç”¨æ³•"><a href="#ä¸‰-contexté«˜é˜¶ç”¨æ³•" class="headerlink" title="ä¸‰ contexté«˜é˜¶ç”¨æ³•"></a>ä¸‰ contexté«˜é˜¶ç”¨æ³•</h2><h3 id="åµŒå¥—-Provider"><a href="#åµŒå¥—-Provider" class="headerlink" title="åµŒå¥— Provider"></a>åµŒå¥— Provider</h3><p>å¤šä¸ª Provider ä¹‹é—´å¯ä»¥ç›¸äº’åµŒå¥—ï¼Œæ¥ä¿å­˜&#x2F;åˆ‡æ¢ä¸€äº›å…¨å±€æ•°æ®ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="literal">null</span>) <span class="comment">// ä¸»é¢˜é¢œè‰²Context</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">LanContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="literal">null</span>) <span class="comment">// ä¸»é¢˜è¯­è¨€Context</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ConsumerDemo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123; (themeContextValue)=&gt; (</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">LanContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                &#123; (lanContextValue) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                    const &#123; color , background &#125; = themeContextValue</span></span><br><span class="line"><span class="language-xml">                    return <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span>,<span class="attr">background</span> &#125; &#125; &gt;</span> &#123; lanContextValue === &#x27;CH&#x27;  ? &#x27;å¤§å®¶å¥½ï¼Œè®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ React!&#x27; : &#x27;Hello, let us learn React!&#x27;  &#125;  <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span></span><br><span class="line"><span class="language-xml">                &#125; &#125;</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">LanContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )  &#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Son</span> = <span class="title function_">memo</span>(<span class="function">()=&gt;</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ConsumerDemo</span> /&gt;</span></span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">ProviderDemo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [ themeContextValue ] = <span class="title class_">React</span>.<span class="title function_">useState</span>(&#123;  <span class="attr">color</span>:<span class="string">&#x27;#FFF&#x27;</span>, <span class="attr">background</span>:<span class="string">&#x27;blue&#x27;</span> &#125;)</span><br><span class="line">    <span class="keyword">const</span> [ lanContextValue ] = <span class="title class_">React</span>.<span class="title function_">useState</span>(<span class="string">&#x27;CH&#x27;</span>) <span class="comment">// CH -&gt; ä¸­æ–‡ ï¼Œ EN -&gt; è‹±æ–‡</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;themeContextValue&#125;</span>  &gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">LanContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;lanContextValue&#125;</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">Son</span>  /&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">LanContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š</p>
<p><img src="https://raw.githubusercontent.com/Flashcard8009/image/main/img/202309261651111.jpeg" alt="context3.jpg"></p>
<ul>
<li>ThemeContext ä¿å­˜ä¸»é¢˜ä¿¡æ¯ï¼Œç”¨ LanContext ä¿å­˜è¯­è¨€ä¿¡æ¯ã€‚</li>
<li>ä¸¤ä¸ª Provider åµŒå¥—æ¥ä¼ é€’å…¨å±€ä¿¡æ¯ã€‚</li>
<li>ç”¨ä¸¤ä¸ª Consumer åµŒå¥—æ¥æ¥å—ä¿¡æ¯ã€‚</li>
</ul>
<p>è¿˜æœ‰å°±æ˜¯å¯ä»¥å­¦ä¹ ä¸€äº›ä¼˜ç§€çš„å¼€æºåº“ï¼Œæ¯”å¦‚ ant-designï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•ä¼˜é›…çš„ä½¿ç”¨ context ã€‚</p>
<h3 id="é€å±‚ä¼ é€’Provider"><a href="#é€å±‚ä¼ é€’Provider" class="headerlink" title="é€å±‚ä¼ é€’Provider"></a>é€å±‚ä¼ é€’Provider</h3><p>Provider è¿˜æœ‰ä¸€ä¸ªè‰¯å¥½çš„ç‰¹æ€§ï¼Œå°±æ˜¯å¯ä»¥é€å±‚ä¼ é€’ context ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª context å¯ä»¥ç”¨å¤šä¸ª Provder ä¼ é€’ï¼Œä¸‹ä¸€å±‚çº§çš„ Provder ä¼šè¦†ç›–ä¸Šä¸€å±‚çº§çš„ Provder ã€‚React-redux ä¸­ connect å°±æ˜¯ç”¨è¿™ä¸ªè‰¯å¥½ç‰¹æ€§ä¼ é€’è®¢é˜…å™¨çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€å±‚ä¼ é€’Provder</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123; (themeContextValue2)=&gt;&#123;</span></span><br><span class="line"><span class="language-xml">            const &#123; color , background &#125; = themeContextValue2</span></span><br><span class="line"><span class="language-xml">            return  <span class="tag">&lt;<span class="name">div</span>  <span class="attr">className</span>=<span class="string">&quot;sonbox&quot;</span>  <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span>,<span class="attr">background</span> &#125; &#125; &gt;</span>  ç¬¬äºŒå±‚Provder <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#125;  &#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Son</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; color, background &#125; = <span class="title class_">React</span>.<span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>)</span><br><span class="line">    <span class="keyword">const</span> [ themeContextValue2 ] = <span class="title class_">React</span>.<span class="title function_">useState</span>(&#123;  <span class="attr">color</span>:<span class="string">&#x27;#fff&#x27;</span>, <span class="attr">background</span>:<span class="string">&#x27;blue&#x27;</span> &#125;) </span><br><span class="line">    <span class="comment">/* ç¬¬äºŒå±‚ Provder ä¼ é€’å†…å®¹ */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;box&#x27;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span>,<span class="attr">background</span> &#125; &#125; &gt;</span></span></span><br><span class="line"><span class="language-xml">        ç¬¬ä¸€å±‚Provder</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;</span> <span class="attr">themeContextValue2</span> &#125; &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Son2</span>  /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">Provider1Demo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [ themeContextValue ] = <span class="title class_">React</span>.<span class="title function_">useState</span>(&#123;  <span class="attr">color</span>:<span class="string">&#x27;orange&#x27;</span>, <span class="attr">background</span>:<span class="string">&#x27;pink&#x27;</span> &#125;)</span><br><span class="line">     <span class="comment">/* ç¬¬ä¸€å±‚  Provider ä¼ é€’å†…å®¹  */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;</span> <span class="attr">themeContextValue</span> &#125; &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">Son</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ•ˆæœï¼š </p>
<p><img src="https://raw.githubusercontent.com/Flashcard8009/image/main/img/202309261651157.jpeg" alt="context4.jpg"></p>
<ul>
<li>å…¨å±€åªæœ‰ä¸€ä¸ª ThemeContext ï¼Œä¸¤æ¬¡ç”¨ provider ä¼ é€’ä¸¤ä¸ªä¸åŒ context ã€‚</li>
<li>ç»„ä»¶è·å– context æ—¶å€™ï¼Œä¼šè·å–ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ä¸Šä¸€å±‚ Provider ã€‚</li>
<li>ä¸‹ä¸€å±‚çš„ provider ä¼šè¦†ç›–ä¸Šä¸€å±‚çš„ provider ã€‚</li>
</ul>
<p>Provider ç‰¹æ€§æ€»ç»“ï¼š</p>
<ul>
<li>1 Provider ä½œä¸ºæä¾›è€…ä¼ é€’ context ï¼Œproviderä¸­valueå±æ€§æ”¹å˜ä¼šä½¿æ‰€æœ‰æ¶ˆè´¹contextçš„ç»„ä»¶é‡æ–°æ›´æ–°ã€‚</li>
<li>2 Providerå¯ä»¥é€å±‚ä¼ é€’contextï¼Œä¸‹ä¸€å±‚Providerä¼šè¦†ç›–ä¸Šä¸€å±‚Providerã€‚</li>
</ul>
<h2 id="å››-è¿›é˜¶å®è·µ-åˆ‡æ¢ä¸»é¢˜æ¨¡å¼"><a href="#å››-è¿›é˜¶å®è·µ-åˆ‡æ¢ä¸»é¢˜æ¨¡å¼" class="headerlink" title="å›› è¿›é˜¶å®è·µ-åˆ‡æ¢ä¸»é¢˜æ¨¡å¼"></a>å›› è¿›é˜¶å®è·µ-åˆ‡æ¢ä¸»é¢˜æ¨¡å¼</h2><p>æ¥ä¸‹æ¥å®è·µç”¨ Provider Api å®ç°ä¸€ä¸ªåˆ‡æ¢ ä¸»é¢˜é¢œè‰²çš„ demo ã€‚</p>
<p><strong>å®ç°æ•ˆæœ</strong></p>
<p><img src="https://raw.githubusercontent.com/Flashcard8009/image/main/img/202309261651425.gif" alt="context6.gif"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">ThemeContext</span> = <span class="title class_">React</span>.<span class="title function_">createContext</span>(<span class="literal">null</span>) <span class="comment">// ä¸»é¢˜é¢œè‰²Context</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> theme = &#123; <span class="comment">//ä¸»é¢˜é¢œè‰²</span></span><br><span class="line">    <span class="attr">dark</span>:&#123;  <span class="attr">color</span>:<span class="string">&#x27;#1890ff&#x27;</span> , <span class="attr">background</span>:<span class="string">&#x27;#1890ff&#x27;</span>, <span class="attr">border</span>: <span class="string">&#x27;1px solid blue&#x27;</span> ,<span class="attr">type</span>:<span class="string">&#x27;dark&#x27;</span>,  &#125;,</span><br><span class="line">    <span class="attr">light</span>: &#123;  <span class="attr">color</span>:<span class="string">&#x27;#fc4838&#x27;</span> , <span class="attr">background</span>:<span class="string">&#x27;#fc4838&#x27;</span>, <span class="attr">border</span>: <span class="string">&#x27;1px solid pink&#x27;</span> ,<span class="attr">type</span>:<span class="string">&#x27;light&#x27;</span>  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* inputè¾“å…¥æ¡† - useContext æ¨¡å¼ */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Input</span>(<span class="params">props</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span>  &#123; color,border &#125; = <span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>)</span><br><span class="line">    <span class="keyword">const</span> &#123; label , placeholder &#125; = props</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span> &#125;&#125; &gt;</span>&#123; label &#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">className</span>=<span class="string">&quot;input&quot;</span> <span class="attr">placeholder</span>=<span class="string">&#123;placeholder&#125;</span>  <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border</span> &#125;&#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* å®¹å™¨ç»„ä»¶ -  Consumeræ¨¡å¼ */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Box</span>(<span class="params">props</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123; (themeContextValue)=&gt;&#123;</span></span><br><span class="line"><span class="language-xml">            const &#123; border,color &#125; = themeContextValue</span></span><br><span class="line"><span class="language-xml">            return <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;context_box&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border</span>,<span class="attr">color</span> &#125;&#125; &gt;</span></span></span><br><span class="line"><span class="language-xml">            &#123; props.children &#125;</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#125; &#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Consumer</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span>  <span class="title function_">Checkbox</span> (props)&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; label ,name, onChange &#125; = props</span><br><span class="line">    <span class="keyword">const</span> &#123; type , color &#125; = <span class="title class_">React</span>.<span class="title function_">useContext</span>(<span class="title class_">ThemeContext</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;checkbox&quot;</span>  <span class="attr">onClick</span>=<span class="string">&#123;onChange&#125;</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">htmlFor</span>=<span class="string">&quot;name&quot;</span> &gt;</span> &#123;label&#125; <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&#123;name&#125;</span> <span class="attr">value</span>=<span class="string">&#123;type&#125;</span> <span class="attr">name</span>=<span class="string">&#123;name&#125;</span> <span class="attr">checked</span>=<span class="string">&#123;</span> <span class="attr">type</span> === <span class="string">name</span> &#125;  <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color</span> &#125; &#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// contextType æ¨¡å¼</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.PureComponent</span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextType = <span class="title class_">ThemeContext</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; border , setTheme ,color  ,background&#125; = <span class="variable language_">this</span>.<span class="property">context</span></span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;context_app&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">border</span> , <span class="attr">color</span> &#125;&#125;  &gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;context_change_theme&quot;</span>   &gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">span</span>&gt;</span> é€‰æ‹©ä¸»é¢˜ï¼š <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">Checkbox</span> <span class="attr">label</span>=<span class="string">&quot;light&quot;</span>  <span class="attr">name</span>=<span class="string">&quot;light&quot;</span> <span class="attr">onChange</span>=<span class="string">&#123;</span> ()=&gt;</span> setTheme(theme.light) &#125;  /&gt;</span></span><br><span class="line"><span class="language-xml">             <span class="tag">&lt;<span class="name">Checkbox</span> <span class="attr">label</span>=<span class="string">&quot;dark&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dark&quot;</span>  <span class="attr">onChange</span>=<span class="string">&#123;</span> ()=&gt;</span> setTheme(theme.dark) &#125;   /&gt;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;box_content&#x27;</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Box</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Input</span> <span class="attr">label</span>=<span class="string">&quot;å§“åï¼š&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å§“å&quot;</span>  /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Input</span> <span class="attr">label</span>=<span class="string">&quot;ageï¼š&quot;</span>  <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥å¹´é¾„&quot;</span>  /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;searchbtn&quot;</span> <span class="attr">style</span>=<span class="string">&#123;</span> &#123; <span class="attr">background</span> &#125; &#125; &gt;</span>ç¡®å®š<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">className</span>=<span class="string">&quot;concellbtn&quot;</span> <span class="attr">style</span>=<span class="string">&#123;</span> &#123; <span class="attr">color</span> &#125; &#125; &gt;</span>å–æ¶ˆ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Box</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Box</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">HomeOutlined</span>  <span class="attr">twoToneColor</span>=<span class="string">&#123;</span> <span class="attr">color</span> &#125; /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">SettingFilled</span> <span class="attr">twoToneColor</span>=<span class="string">&#123;</span> <span class="attr">color</span> &#125;  /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">SmileOutlined</span> <span class="attr">twoToneColor</span>=<span class="string">&#123;</span> <span class="attr">color</span> &#125;  /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">SyncOutlined</span> <span class="attr">spin</span>  <span class="attr">twoToneColor</span>=<span class="string">&#123;</span> <span class="attr">color</span> &#125;  /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">SmileOutlined</span> <span class="attr">twoToneColor</span>=<span class="string">&#123;</span> <span class="attr">color</span> &#125;  <span class="attr">rotate</span>=<span class="string">&#123;180&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">LoadingOutlined</span> <span class="attr">twoToneColor</span>=<span class="string">&#123;</span> <span class="attr">color</span> &#125;   /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Box</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Box</span> &gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;person_des&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span>&#x27;#<span class="attr">fff</span>&#x27; , <span class="attr">background</span> &#125;&#125;  &gt;</span></span></span><br><span class="line"><span class="language-xml">                    I am alien  <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">                    let us learn React!</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Box</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> [ themeContextValue ,setThemeContext ] = <span class="title class_">React</span>.<span class="title function_">useState</span>(theme.<span class="property">dark</span>) </span><br><span class="line">    <span class="comment">/* ä¼ é€’é¢œè‰²ä¸»é¢˜ å’Œ æ”¹å˜ä¸»é¢˜çš„æ–¹æ³• */</span></span><br><span class="line">    <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">ThemeContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;</span> &#123; <span class="attr">...themeContextValue</span>, <span class="attr">setTheme:setThemeContext</span>  &#125; &#125; &gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">App</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">ThemeContext.Provider</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æµç¨‹åˆ†æï¼š</p>
<ul>
<li>åœ¨ Root ç»„ä»¶ä¸­ï¼Œç”¨ Provider æŠŠä¸»é¢˜é¢œè‰² <code>themeContextValue</code> å’Œæ”¹å˜ä¸»é¢˜çš„ <code>setTheme</code> ä¼ å…¥ context ã€‚</li>
<li>åœ¨ App ä¸­åˆ‡æ¢ä¸»é¢˜ã€‚</li>
<li>å°è£…ç»Ÿä¸€çš„ Input Checkbox Box ç»„ä»¶ï¼Œç»„ä»¶å†…éƒ¨æ¶ˆè´¹ä¸»é¢˜é¢œè‰²çš„ context ï¼Œä¸»é¢˜æ”¹å˜ï¼Œç»Ÿä¸€æ›´æ–°ï¼Œè¿™æ ·å°±ä¸å¿…åœ¨æ¯ä¸€ä¸ªæ¨¡å—éƒ½ç»‘å®šä¸»é¢˜ï¼Œç»Ÿä¸€ä½¿ç”¨ä¸»ä½“ç»„ä»¶å°±å¯ä»¥äº†ã€‚</li>
</ul>
<h2 id="äº”-æ€»ç»“"><a href="#äº”-æ€»ç»“" class="headerlink" title="äº” æ€»ç»“"></a>äº” æ€»ç»“</h2><p>é€šè¿‡è¿™èŠ‚å­¦ä¹ äº†ï¼š</p>
<ul>
<li>è€ç‰ˆæœ¬çš„ context å’Œ æ–°ç‰ˆæœ¬çš„ context ã€‚</li>
<li>æ–°ç‰ˆæœ¬æä¾›è€… Provider ç‰¹æ€§å’Œä¸‰ç§æ¶ˆè´¹è€…æ¨¡å¼ã€‚</li>
<li>context çš„é«˜é˜¶ç”¨æ³•ã€‚</li>
<li>å®è·µ demo åˆ‡æ¢ä¸»é¢˜ã€‚</li>
</ul>
<p>ä¸‹ä¸€èŠ‚ï¼Œå°†ä¸€èµ·ç ”ç©¶css in React!</p>
</div><div class="tags"><ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/book/tags/React/" rel="tag">React</a></li></ul></div><div class="post-nav"><a class="pre" href="/book/2023/chapter-06-basic-chapter-understanding-lifecycle/">ç¬¬06ç« â€”åŸºç¡€ç¯‡-ç†è§£lifeCycle</a><a class="next" href="/book/2023/chapter-09-fundamentals-modular-css/">ç¬¬09ç« â€”åŸºç¡€ç¯‡-æ¨¡å—åŒ–css</a></div><script src="https://utteranc.es/client.js" repo="Flashcard8009/book" issue-term="pathname" theme="github-light" crossorigin="anonymous" async></script></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="author-info"><a class="info-avatar" href="/about/" title="å…³äº"><img class="nofancybox" src="https://avatars.githubusercontent.com/Flashcard8009"/></a><p>To be a better man.</p><a class="info-icon" href="https://github.com/Flashcard8009" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a><a class="info-icon" href="https://github.com/username" title="Github" target="_blank" style="margin-inline:5px"> <i class="fa fa-github-square" style="margin-inline:5px"></i></a><a class="info-icon" href="/atom.xml" title="RSS" target="_blank" style="margin-inline:5px"> <i class="fa fa-rss-square" style="margin-inline:5px"></i></a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/book/categories/%E9%BB%98%E8%AE%A4/">é»˜è®¤</a><span class="category-list-count">43</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/book/tags/React/" style="font-size: 15px;">React</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/book/2023/book__react-advanced-practice-guide/">React è¿›é˜¶å®è·µæŒ‡å—</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-05-basic-chapter-deep-tips/">ç¬¬05ç« â€”åŸºç¡€ç¯‡-æ·±å…¥props</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-04-basic-chapter-metaphysics-state/">ç¬¬04ç« â€”åŸºç¡€ç¯‡-ç„å­¦state</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-07-basic-chapter-multifunctional-ref/">ç¬¬07ç« â€”åŸºç¡€ç¯‡-å¤šåŠŸèƒ½Ref</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-06-basic-chapter-understanding-lifecycle/">ç¬¬06ç« â€”åŸºç¡€ç¯‡-ç†è§£lifeCycle</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-08-basic-chapter-provider-context/">ç¬¬08ç« â€”åŸºç¡€ç¯‡-æä¾›è€…context</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-09-fundamentals-modular-css/">ç¬¬09ç« â€”åŸºç¡€ç¯‡-æ¨¡å—åŒ–css</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-10-fundamentals-advanced-components/">ç¬¬10ç« â€”åŸºç¡€ç¯‡-é«˜é˜¶ç»„ä»¶</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-12-optimization-chapter-rendering-tuning/">ç¬¬12ç« â€”ä¼˜åŒ–ç¯‡-æ¸²æŸ“è°ƒä¼˜</a></li><li class="post-list-item"><a class="post-list-link" href="/book/2023/chapter-11-optimization-rendering-control/">ç¬¬11ç« â€”ä¼˜åŒ–ç¯‡-æ¸²æŸ“æ§åˆ¶</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="/" title="ä¸­æ–‡åšå®¢" target="_blank">ä¸­æ–‡åšå®¢</a><ul></ul><a href="/en" title="EN Blog" target="_blank">EN Blog</a><ul></ul><a href="https://github.com/Flashcard8009" title="GitHub" target="_blank">GitHub</a><ul></ul><a href="https://www.baidu.com/" title="ç™¾åº¦" target="_blank">ç™¾åº¦</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2023 <a href="/book/." rel="nofollow">æ˜é‡‘å°å†Œ.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/book/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.js"></script><script type="text/javascript" src="/book/js/fancybox.js?v=1.0.0"></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/latest/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/book/css/search.css?v=1.0.0"><script type="text/javascript" src="/book/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
  search_path = 'search.xml';
}
var path = '/book/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/book/js/copycode.js?v=1.0.0" successtext="å¤åˆ¶æˆåŠŸï¼"></script><link rel="stylesheet" type="text/css" href="/book/css/copycode.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="/book/css/external.css?v=1.0.0"><script type="text/javascript" src="/book/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/book/js/smartresize.js?v=1.0.0"></script></div></body></html>